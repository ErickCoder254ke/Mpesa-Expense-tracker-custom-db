# Nixpacks configuration for Railway
# This avoids Docker Hub entirely and uses Nix packages

[phases.setup]
nixPkgs = ["python311", "gcc"]

[phases.install]
cmds = [
    "pip install --no-cache-dir --upgrade pip",
    "pip install --no-cache-dir -r backend/requirements.txt"
]

[phases.build]
cmds = ["echo 'Build phase complete'"]

[start]
cmd = "cd backend && uvicorn server:app --host 0.0.0.0 --port ${PORT:-8000} --timeout-keep-alive 75 --log-level info"

[variables]
PYTHONUNBUFFERED = "1"
PYTHONPATH = "/app/backend"
PYTHONDONTWRITEBYTECODE = "1"
